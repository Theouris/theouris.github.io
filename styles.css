:root{ --bg: #081a2b; --panel: #0b2238; --panel-2: #0e2b46; --text: #eef5ff; --muted: rgba(238,245,255,.72); --accent: #6aa6ff; --shadow: 0 18px 60px rgba(0,0,0,.45); --radius: 14px; --sidebar-width: 320px; --topbar-offset: 124px; --sidebar-top-offset: 112px; --anim: 220ms ease; }
* { box-sizing: border-box; }
html{ scroll-behavior: smooth; }
html, body { height: 100%; }
body{ margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background: var(--bg); color: var(--text); overflow-x: hidden; }

.topbar{ position: fixed; top: 0; left: 0; right: 0; z-index: 30; display: flex; align-items: center; gap: 14px; padding: 16px 18px; background: rgba(8,26,43,.75); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(238,245,255,.08); flex-wrap: wrap; }
.menu-btn{ width: 44px; height: 44px; border: 1px solid rgba(238,245,255,.14); background: rgba(11,34,56,.65); border-radius: 12px; display: grid; place-items: center; cursor: pointer; transition: transform var(--anim), background var(--anim), border-color var(--anim); }
.bars{ width: 20px; height: 14px; position: relative; }
.bars span{ position: absolute; left: 0; width: 100%; height: 2px; background: var(--text); border-radius: 999px; transition: transform var(--anim), top var(--anim), opacity var(--anim); }
.bars span:nth-child(1){ top: 0; }
.bars span:nth-child(2){ top: 6px; }
.bars span:nth-child(3){ top: 12px; }
body.sidebar-open .bars span:nth-child(1){ top: 6px; transform: rotate(45deg); }
body.sidebar-open .bars span:nth-child(2){ opacity: 0; }
body.sidebar-open .bars span:nth-child(3){ top: 6px; transform: rotate(-45deg); }
.brand{ display: inline-flex; align-items: center; gap: 10px; font-weight: 750; letter-spacing: .2px; padding: 8px 12px; border-radius: 10px; background: rgba(11,34,56,.65); border: 1px solid rgba(238,245,255,.06); cursor: pointer; text-decoration: none; color: inherit; }
.brand .dot{ width: 10px; height: 10px; border-radius: 999px; background: var(--accent); box-shadow: 0 0 18px rgba(106,166,255,.35); }
.section-nav{ display: flex; align-items: center; gap: 8px; overflow-x: auto; overflow-y: hidden; padding-right: 8px; padding-bottom: 2px; flex: 1 1 100%; min-width: 0; scrollbar-width: thin; scrollbar-color: rgba(238,245,255,.35) rgba(11,34,56,.25); -webkit-overflow-scrolling: touch; }
.section-nav::-webkit-scrollbar{ height: 6px; }
.section-nav::-webkit-scrollbar-track{ background: rgba(11,34,56,.25); border-radius: 999px; }
.section-nav::-webkit-scrollbar-thumb{ background: rgba(238,245,255,.35); border-radius: 999px; }
.section-btn{ white-space: nowrap; padding: 8px 12px; border: 1px solid rgba(238,245,255,.14); background: rgba(11,34,56,.55); border-radius: 10px; color: var(--text); text-decoration: none; cursor: pointer; transition: background var(--anim), border-color var(--anim), color var(--anim); font-size: 13px; font-weight: 500; flex-shrink: 0; }
.section-btn:hover{ background: rgba(11,34,56,.85); border-color: rgba(238,245,255,.20); }
.overlay{ position: fixed; inset: 0; background: rgba(0,0,0,.45); opacity: 0; pointer-events: none; transition: opacity var(--anim); z-index: 20; }
body.sidebar-open .overlay{ opacity: 1; pointer-events: auto; }
.sidebar{ position: fixed; top: var(--sidebar-top-offset); left: 0; height: calc(100% - var(--sidebar-top-offset)); width: var(--sidebar-width); background: linear-gradient(180deg, rgba(11,34,56,.98), rgba(8,26,43,.98)); border-right: 1px solid rgba(238,245,255,.10); box-shadow: var(--shadow); transform: translateX(-105%); transition: transform var(--anim); z-index: 25; padding: 18px 14px; display: flex; flex-direction: column; gap: 14px; }
body.sidebar-open .sidebar{ transform: translateX(0); }
.nav{ margin-top: 6px; display: flex; flex-direction: column; gap: 8px; }
.nav-item{ border: 1px solid rgba(238,245,255,.10); background: rgba(11,34,56,.55); border-radius: var(--radius); overflow: hidden; }
.nav-main{ width: 100%; padding: 14px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; user-select: none; font-weight: 650; background: transparent; color: var(--text); border: 0; text-align: left; font-size: 16px; }
.chev{ width: 10px; height: 10px; border-right: 2px solid rgba(238,245,255,.85); border-bottom: 2px solid rgba(238,245,255,.85); transform: rotate(-45deg); opacity: .9; margin-right: 4px; }
.nav-item.open .chev{ transform: rotate(45deg); }
.submenu{ max-height: 0; opacity: 0; transition: max-height var(--anim), opacity var(--anim); background: rgba(8,26,43,.35); border-top: 1px solid rgba(238,245,255,.08); }
.nav-item.open .submenu{ max-height: 220px; opacity: 1; }
.submenu a{ display: block; padding: 12px 14px; color: var(--muted); text-decoration: none; border-top: 1px solid rgba(238,245,255,.06); font-size: 14px; }
main.post-area{ margin-top: var(--topbar-offset); padding: 0 0 80px; }
article.post{ width: 1100px; max-width: 1100px; margin: 0 auto; padding: 12px 18px 0; color: var(--muted); line-height: 1.8; font-size: 16px; }
article.post h2{ color: var(--text); margin-top: 0; scroll-margin-top: var(--topbar-offset); }

@media (max-width: 1100px){
  article.post{ width: 100%; max-width: none; }
}

@media (max-width: 720px){
  article.post{ padding-left: 12px; padding-right: 12px; }
}

main.home-main{ margin-top: var(--topbar-offset); padding: 8px 32px 80px; margin-left: auto; margin-right: auto; }
article.post figure{ max-width: 720px; display: flex; flex-direction: column; margin: 0 auto 20px; }
article.post figure img{ width: 100%; height: auto; display: block; }
article.post figure figcaption{ padding-bottom: 18px; }
article.post .figure-row{ display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 0 0 20px; }
article.post .figure-row figure{ flex: 1 1 360px; margin: 0 auto; }

@media (min-width: 720px){
  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))){
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
    align-items: start;
    width: min(100%, 1100px);
    max-width: 1100px;
  }

  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))) > img{
    width: 100%;
    margin: 0;
  }

  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))) > img:nth-of-type(1){
    grid-column: 1;
    grid-row: 1;
  }

  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))) > img:nth-of-type(2){
    grid-column: 2;
    grid-row: 1;
  }

  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))) > figcaption{
    margin: 0;
    padding-bottom: 0;
  }

  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))) > figcaption:nth-of-type(1){
    grid-column: 1;
    grid-row: 2;
  }

  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))) > figcaption:nth-of-type(2){
    grid-column: 2;
    grid-row: 2;
  }

  article.post figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))) > figcaption:only-of-type{
    grid-column: 1 / -1;
    grid-row: 2;
  }
}

@media (min-width: 1920px){
  article.post .figure-row figure{ flex: 0 1 calc(50% - 10px); max-width: 620px; }
  article.post .figure-row figure:has(> img:nth-of-type(2)):not(:has(> img:nth-of-type(3))){
    flex: 0 1 100%;
    max-width: 1100px;
  }
}

/* small utilities used by pages */
.center{ text-align:center }
.kbd{ padding: 2px 7px; border-radius: 8px; border: 1px solid rgba(238,245,255,.12); background: rgba(0,0,0,.18); color: rgba(238,245,255,.85); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size: 12px; }

body.home-page .topbar,
body.has-section-nav .topbar{ min-height: var(--sidebar-top-offset); align-content: flex-start; }
